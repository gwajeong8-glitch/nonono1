<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>VIP CARD MAKER</title>

<style>
    body {
        background: #111;
        padding: 30px;
        color: #EEE8D5;
        font-family: sans-serif;
        display: flex;
        gap: 30px;
    }

    /* ì¹´ë“œ ì˜ì—­ */
    #cardArea {
        width: 700px;
        height: 450px;
        background-size: cover;
        background-position: center;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
    }

    /* ID í…ìŠ¤íŠ¸ */
    #idText {
        position: absolute;
        color: #FFFDD0;        /* ì•„ì´ë³´ë¦¬ */
        font-size: 23px;
        font-weight: bold;
        left: 310px;
        top: 365px;
    }

    /* CARD NO í…ìŠ¤íŠ¸ */
    #cardNoText {
        position: absolute;
        color: #FFFDD0;
        font-size: 23px;
        font-weight: bold;
        left: 310px;
        top: 390px;
    }
    
    /* ğŸ’¡ Status í…ìŠ¤íŠ¸ (Active/Inactive) - ë°°ê²½ ì¶”ê°€ ë° í°ìƒ‰ í°íŠ¸ */
    #statusText {
        position: absolute;
        right: 30px; 
        top: 70px;
        color: #FFFFFF; /* ê¸€ììƒ‰ì„ í°ìƒ‰ìœ¼ë¡œ ë³€ê²½ */
        font-size: 30px;
        font-weight: 900;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.7); 
        
        /* ğŸ’¡ ë°°ê²½ ìŠ¤íƒ€ì¼ */
        background-color: rgba(0, 128, 0, 0.6); /* JSì—ì„œ ë³€ê²½ë  ê¸°ë³¸ ë°°ê²½ìƒ‰ (Active) */
        padding: 8px 15px; 
        border-radius: 8px; 
        display: inline-block; 
        transition: background-color 0.3s ease; /* ë°°ê²½ìƒ‰ ë³€ê²½ ì‹œ ì• ë‹ˆë©”ì´ì…˜ */
    }


    #controls input,
    #controls select,
    #controls button {
        margin-bottom: 10px;
        padding: 7px;
        width: 220px;
        box-sizing: border-box;
    }

    button {
        background: #d4b98b;
        border: none;
        cursor: pointer;
        font-weight: bold;
    }
    
    /* ì €ì¥ ë²„íŠ¼ìš© ìŠ¤íƒ€ì¼ */
    #saveContentBtn {
        background: #8bd4be;
        color: #000;
    }

    /* Status ì»¨íŠ¸ë¡¤ ë ˆì´ì•„ì›ƒ */
    .status-control {
        display: flex; 
        align-items: center;
        gap: 10px;
        margin-bottom: 20px;
    }

    #toggleStatusBtn {
        width: 150px; 
        background: #3498db;
        color: white;
    }

    #currentStatus {
        font-weight: bold;
        /* ìƒ‰ìƒì€ JSì—ì„œ ë™ì ìœ¼ë¡œ ë³€ê²½ë©ë‹ˆë‹¤. */
    }
</style>
</head>

<body>

<div id="cardArea" style="background-image: url('vip1.png');">
    <div id="idText">ID: í™ê¸¸ë™</div>
    <div id="cardNoText">CARD NO: 0000000000</div>
    <div id="statusText">Active</div>
</div>

<div id="controls">

    <h2>ì¹´ë“œ ì„¤ì • âš™ï¸</h2>

    <label>VIP ë°°ê²½ ì„ íƒ</label><br>
    <select id="vipSelect">
        <option value="vip1.png">VIP 1</option>
        <option value="vip2.png">VIP 2</option>
        <option value="vip3.png">VIP 3</option>
    </select><br>

    <label>ID ì…ë ¥</label><br>
    <input id="idInput" type="text" value="í™ê¸¸ë™"><br>

    <label>CARD NO ì…ë ¥</label><br>
    <input id="cardNoInput" type="text" value="0000000000" maxlength="10"><br>

    <label>ì¹´ë“œ ìƒíƒœ (Status)</label><br>
    <div class="status-control">
        <button id="toggleStatusBtn">Toggle Status</button>
        <span id="currentStatus">Active</span>
    </div>

    <button id="saveContentBtn">ì…ë ¥ ë‚´ìš© ì €ì¥ (Local)</button>
    <button id="downloadBtn">PNG ë‹¤ìš´ë¡œë“œ</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<script>
    const idText = document.getElementById("idText");
    const cardNoText = document.getElementById("cardNoText");
    const idInput = document.getElementById("idInput");
    const cardNoInput = document.getElementById("cardNoInput");
    const vipSelect = document.getElementById("vipSelect");
    const cardArea = document.getElementById("cardArea");
    
    // ğŸ’¡ Status ê´€ë ¨ ë³€ìˆ˜
    const statusText = document.getElementById("statusText");
    const toggleStatusBtn = document.getElementById("toggleStatusBtn");
    const currentStatusSpan = document.getElementById("currentStatus");
    let isCardActive = true; // ê¸°ë³¸ ìƒíƒœ: Active

    /* ğŸ’¡ Status í…ìŠ¤íŠ¸ ë° UI ì—…ë°ì´íŠ¸ í•¨ìˆ˜ (ë°°ê²½ìƒ‰ ì„¤ì • ì¶”ê°€) */
    function updateStatusDisplay() {
        if (isCardActive) {
            statusText.textContent = "Active";
            statusText.style.backgroundColor = "rgba(0, 128, 0, 0.6)"; // ì´ˆë¡ìƒ‰ ê³„ì—´ ë°°ê²½
            currentStatusSpan.textContent = "Active";
            currentStatusSpan.style.color = "#00FF00"; // ë°ì€ ì´ˆë¡ìƒ‰
        } else {
            statusText.textContent = "Inactive";
            statusText.style.backgroundColor = "rgba(128, 0, 0, 0.6)"; // ë¹¨ê°„ìƒ‰ ê³„ì—´ ë°°ê²½
            currentStatusSpan.textContent = "Inactive";
            currentStatusSpan.style.color = "#FF0000"; // ë°ì€ ë¹¨ê°„ìƒ‰
        }
        // statusText.style.colorëŠ” CSSì—ì„œ #FFFFFFë¡œ ê³ ì •ë©ë‹ˆë‹¤.
    }

    /* 1. ì´ˆê¸°í™”: ì €ì¥ëœ ë‚´ìš©ì´ ìˆìœ¼ë©´ ë¶ˆëŸ¬ì˜¤ê¸° */
    function loadSavedData() {
        const savedId = localStorage.getItem('vip_id');
        const savedNo = localStorage.getItem('vip_cardNo');
        const savedBg = localStorage.getItem('vip_bg');
        const savedStatus = localStorage.getItem('vip_status');

        if (savedId) {
            idInput.value = savedId;
            idText.textContent = "ID: " + savedId;
        }
        if (savedNo) {
            cardNoInput.value = savedNo;
            cardNoText.textContent = "CARD NO: " + savedNo;
        }
        if (savedBg) {
            vipSelect.value = savedBg;
            cardArea.style.backgroundImage = `url('${savedBg}')`;
        }
        
        // ğŸ’¡ Status ìƒíƒœ ì ìš©
        if (savedStatus !== null) {
            isCardActive = (savedStatus === 'true'); 
        }
        updateStatusDisplay(); // ìƒíƒœë¥¼ í™”ë©´ì— ë°˜ì˜ (ë°°ê²½ìƒ‰ í¬í•¨)
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
    loadSavedData();

    /* í…ìŠ¤íŠ¸ ì…ë ¥ ë³€ê²½ (ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸) */
    idInput.addEventListener("input", e => {
        idText.textContent = "ID: " + e.target.value;
    });

    cardNoInput.addEventListener("input", e => {
        e.target.value = e.target.value.substring(0, 10);
        cardNoText.textContent = "CARD NO: " + e.target.value;
    });

    /* VIP ë°°ê²½ ë³€ê²½ */
    vipSelect.addEventListener("change", e => {
        cardArea.style.backgroundImage = `url('${e.target.value}')`;
    });

    /* ğŸ’¡ Status í† ê¸€ ë²„íŠ¼ ê¸°ëŠ¥ */
    toggleStatusBtn.addEventListener("click", () => {
        isCardActive = !isCardActive; // ìƒíƒœ ë°˜ì „
        updateStatusDisplay(); // í™”ë©´ ì—…ë°ì´íŠ¸ (ë°°ê²½ìƒ‰ ë³€ê²½)
    });

    /* ğŸ”¥ ë‚´ìš© ì €ì¥ ë²„íŠ¼ ê¸°ëŠ¥ */
    document.getElementById("saveContentBtn").addEventListener("click", () => {
        localStorage.setItem('vip_id', idInput.value);
        localStorage.setItem('vip_cardNo', cardNoInput.value);
        localStorage.setItem('vip_bg', vipSelect.value);
        localStorage.setItem('vip_status', isCardActive); // Status ìƒíƒœ ì €ì¥
        alert("í˜„ì¬ ì…ë ¥ëœ ë‚´ìš©ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\në‹¤ìŒì— ë‹¤ì‹œ ì—´ë©´ ê·¸ëŒ€ë¡œ ìœ ì§€ë©ë‹ˆë‹¤.");
    });

    /* PNG ì €ì¥ */
    document.getElementById("downloadBtn").addEventListener("click", () => {
        html2canvas(cardArea).then(canvas => {
            const link = document.createElement("a");
            link.download = "vip_card.png";
            link.href = canvas.toDataURL();
            link.click();
        });
    });
</script>

</body>
</html>
